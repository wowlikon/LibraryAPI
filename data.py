import requests
from typing import Optional

# –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
USERNAME = "admin"
PASSWORD = "TzUlDpUCHutFa-oGCd1cBw"
BASE_URL = "http://localhost:8000"


class LibraryAPI:
    def __init__(self, base_url: str):
        self.base_url = base_url
        self.token: Optional[str] = None
        self.session = requests.Session()

    def login(self, username: str, password: str) -> bool:
        """–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –∏ –ø–æ–ª—É—á–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–∞"""
        response = self.session.post(
            f"{self.base_url}/api/auth/token",
            data={"username": username, "password": password},
            headers={"Content-Type": "application/x-www-form-urlencoded"}
        )
        if response.status_code == 200:
            self.token = response.json()["access_token"]
            self.session.headers.update({"Authorization": f"Bearer {self.token}"})
            print(f"‚úì –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è —É—Å–ø–µ—à–Ω–∞ –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è: {username}")
            return True
        else:
            print(f"‚úó –û—à–∏–±–∫–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏: {response.text}")
            return False

    def register(self, username: str, email: str, password: str, full_name: str = None) -> bool:
        """–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –Ω–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è"""
        data = {
            "username": username,
            "email": email,
            "password": password
        }
        if full_name:
            data["full_name"] = full_name

        response = self.session.post(
            f"{self.base_url}/api/auth/register",
            json=data
        )
        if response.status_code == 201:
            print(f"‚úì –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å {username} –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω")
            return True
        else:
            print(f"‚úó –û—à–∏–±–∫–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏: {response.text}")
            return False

    def create_author(self, name: str) -> Optional[int]:
        """–°–æ–∑–¥–∞–Ω–∏–µ –∞–≤—Ç–æ—Ä–∞"""
        response = self.session.post(
            f"{self.base_url}/api/authors/",
            json={"name": name}
        )
        if response.status_code == 200:
            author_id = response.json()["id"]
            print(f"  ‚úì –ê–≤—Ç–æ—Ä —Å–æ–∑–¥–∞–Ω: {name} (ID: {author_id})")
            return author_id
        else:
            print(f"  ‚úó –û—à–∏–±–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è –∞–≤—Ç–æ—Ä–∞ {name}: {response.text}")
            return None

    def create_book(self, title: str, description: str) -> Optional[int]:
        """–°–æ–∑–¥–∞–Ω–∏–µ –∫–Ω–∏–≥–∏"""
        response = self.session.post(
            f"{self.base_url}/api/books/",
            json={"title": title, "description": description}
        )
        if response.status_code == 200:
            book_id = response.json()["id"]
            print(f"  ‚úì –ö–Ω–∏–≥–∞ —Å–æ–∑–¥–∞–Ω–∞: {title} (ID: {book_id})")
            return book_id
        else:
            print(f"  ‚úó –û—à–∏–±–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è –∫–Ω–∏–≥–∏ {title}: {response.text}")
            return None

    def create_genre(self, name: str) -> Optional[int]:
        """–°–æ–∑–¥–∞–Ω–∏–µ –∂–∞–Ω—Ä–∞"""
        response = self.session.post(
            f"{self.base_url}/api/genres/",
            json={"name": name}
        )
        if response.status_code == 200:
            genre_id = response.json()["id"]
            print(f"  ‚úì –ñ–∞–Ω—Ä —Å–æ–∑–¥–∞–Ω: {name} (ID: {genre_id})")
            return genre_id
        else:
            print(f"  ‚úó –û—à–∏–±–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è –∂–∞–Ω—Ä–∞ {name}: {response.text}")
            return None

    def link_author_book(self, author_id: int, book_id: int) -> bool:
        """–°–≤—è–∑—å –∞–≤—Ç–æ—Ä–∞ –∏ –∫–Ω–∏–≥–∏"""
        response = self.session.post(
            f"{self.base_url}/api/relationships/author-book",
            params={"author_id": author_id, "book_id": book_id}
        )
        if response.status_code == 200:
            print(f"    ‚Üî –°–≤—è–∑—å –∞–≤—Ç–æ—Ä-–∫–Ω–∏–≥–∞: {author_id} ‚Üî {book_id}")
            return True
        else:
            print(f"    ‚úó –û—à–∏–±–∫–∞ —Å–≤—è–∑–∏ –∞–≤—Ç–æ—Ä-–∫–Ω–∏–≥–∞: {response.text}")
            return False

    def link_genre_book(self, genre_id: int, book_id: int) -> bool:
        """–°–≤—è–∑—å –∂–∞–Ω—Ä–∞ –∏ –∫–Ω–∏–≥–∏"""
        response = self.session.post(
            f"{self.base_url}/api/relationships/genre-book",
            params={"genre_id": genre_id, "book_id": book_id}
        )
        if response.status_code == 200:
            print(f"    ‚Üî –°–≤—è–∑—å –∂–∞–Ω—Ä-–∫–Ω–∏–≥–∞: {genre_id} ‚Üî {book_id}")
            return True
        else:
            print(f"    ‚úó –û—à–∏–±–∫–∞ —Å–≤—è–∑–∏ –∂–∞–Ω—Ä-–∫–Ω–∏–≥–∞: {response.text}")
            return False


def main():
    api = LibraryAPI(BASE_URL)

    # –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è
    if not api.login(USERNAME, PASSWORD):
        print("–ù–µ —É–¥–∞–ª–æ—Å—å –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞—Ç—å—Å—è. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏–Ω –∏ –ø–∞—Ä–æ–ª—å.")
        return

    print("\nüìö –°–æ–∑–¥–∞–Ω–∏–µ –∞–≤—Ç–æ—Ä–æ–≤...")
    authors_data = [
        "–õ–µ–≤ –¢–æ–ª—Å—Ç–æ–π",
        "–§—ë–¥–æ—Ä –î–æ—Å—Ç–æ–µ–≤—Å–∫–∏–π",
        "–ê–Ω—Ç–æ–Ω –ß–µ—Ö–æ–≤",
        "–ê–ª–µ–∫—Å–∞–Ω–¥—Ä –ü—É—à–∫–∏–Ω",
        "–ú–∏—Ö–∞–∏–ª –ë—É–ª–≥–∞–∫–æ–≤",
        "–ù–∏–∫–æ–ª–∞–π –ì–æ–≥–æ–ª—å",
        "–ò–≤–∞–Ω –¢—É—Ä–≥–µ–Ω–µ–≤",
        "–ë–æ—Ä–∏—Å –ü–∞—Å—Ç–µ—Ä–Ω–∞–∫",
        "–ú–∏—Ö–∞–∏–ª –õ–µ—Ä–º–æ–Ω—Ç–æ–≤",
        "–ê–ª–µ–∫—Å–∞–Ω–¥—Ä –°–æ–ª–∂–µ–Ω–∏—Ü—ã–Ω",
        "–ú–∞–∫—Å–∏–º –ì–æ—Ä—å–∫–∏–π",
        "–ò–≤–∞–Ω –ë—É–Ω–∏–Ω"
    ]

    authors = {}
    for name in authors_data:
        author_id = api.create_author(name)
        if author_id:
            authors[name] = author_id

    print("\nüè∑Ô∏è –°–æ–∑–¥–∞–Ω–∏–µ –∂–∞–Ω—Ä–æ–≤...")
    genres_data = [
        "–†–æ–º–∞–Ω",
        "–ü–æ–≤–µ—Å—Ç—å",
        "–†–∞—Å—Å–∫–∞–∑",
        "–ü–æ—ç–∑–∏—è",
        "–î—Ä–∞–º–∞",
        "–§–∏–ª–æ—Å–æ—Ñ—Å–∫–∞—è –ø—Ä–æ–∑–∞",
        "–ò—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–∑–∞",
        "–°–∞—Ç–∏—Ä–∞"
    ]

    genres = {}
    for name in genres_data:
        genre_id = api.create_genre(name)
        if genre_id:
            genres[name] = genre_id

    print("\nüìñ –°–æ–∑–¥–∞–Ω–∏–µ –∫–Ω–∏–≥...")
    books_data = [
        {
            "title": "–í–æ–π–Ω–∞ –∏ –º–∏—Ä",
            "description": "–†–æ–º–∞–Ω-—ç–ø–æ–ø–µ—è –õ—å–≤–∞ –¢–æ–ª—Å—Ç–æ–≥–æ, –æ–ø–∏—Å—ã–≤–∞—é—â–∏–π —Ä—É—Å—Å–∫–æ–µ –æ–±—â–µ—Å—Ç–≤–æ –≤ —ç–ø–æ—Ö—É –≤–æ–π–Ω –ø—Ä–æ—Ç–∏–≤ –ù–∞–ø–æ–ª–µ–æ–Ω–∞ –≤ 1805‚Äî1812 –≥–æ–¥–∞—Ö. –û–¥–Ω–æ –∏–∑ –≤–µ–ª–∏—á–∞–π—à–∏—Ö –ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–π –º–∏—Ä–æ–≤–æ–π –ª–∏—Ç–µ—Ä–∞—Ç—É—Ä—ã.",
            "authors": ["–õ–µ–≤ –¢–æ–ª—Å—Ç–æ–π"],
            "genres": ["–†–æ–º–∞–Ω", "–ò—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–∑–∞"]
        },
        {
            "title": "–ê–Ω–Ω–∞ –ö–∞—Ä–µ–Ω–∏–Ω–∞",
            "description": "–†–æ–º–∞–Ω –õ—å–≤–∞ –¢–æ–ª—Å—Ç–æ–≥–æ –æ —Ç—Ä–∞–≥–∏—á–µ—Å–∫–æ–π –ª—é–±–≤–∏ –∑–∞–º—É–∂–Ω–µ–π –¥–∞–º—ã –ê–Ω–Ω—ã –ö–∞—Ä–µ–Ω–∏–Ω–æ–π –∫ –±–ª–µ—Å—Ç—è—â–µ–º—É –æ—Ñ–∏—Ü–µ—Ä—É –í—Ä–æ–Ω—Å–∫–æ–º—É. –ò—Å—Ç–æ—Ä–∏—è —Å—Ç—Ä–∞—Å—Ç–∏, —Ä–µ–≤–Ω–æ—Å—Ç–∏ –∏ —Ä–æ–∫–æ–≤—ã—Ö —Ä–µ—à–µ–Ω–∏–π.",
            "authors": ["–õ–µ–≤ –¢–æ–ª—Å—Ç–æ–π"],
            "genres": ["–†–æ–º–∞–Ω", "–î—Ä–∞–º–∞"]
        },
        {
            "title": "–ü—Ä–µ—Å—Ç—É–ø–ª–µ–Ω–∏–µ –∏ –Ω–∞–∫–∞–∑–∞–Ω–∏–µ",
            "description": "–°–æ—Ü–∏–∞–ª—å–Ω–æ-–ø—Å–∏—Ö–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Ä–æ–º–∞–Ω –§—ë–¥–æ—Ä–∞ –î–æ—Å—Ç–æ–µ–≤—Å–∫–æ–≥–æ –æ –±–µ–¥–Ω–æ–º —Å—Ç—É–¥–µ–Ω—Ç–µ –†–∞—Å–∫–æ–ª—å–Ω–∏–∫–æ–≤–µ, —Å–æ–≤–µ—Ä—à–∏–≤—à–µ–º —É–±–∏–π—Å—Ç–≤–æ –∏ –º—É—á–∞—é—â–µ–º—Å—è —É–≥—Ä—ã–∑–µ–Ω–∏—è–º–∏ —Å–æ–≤–µ—Å—Ç–∏.",
            "authors": ["–§—ë–¥–æ—Ä –î–æ—Å—Ç–æ–µ–≤—Å–∫–∏–π"],
            "genres": ["–†–æ–º–∞–Ω", "–§–∏–ª–æ—Å–æ—Ñ—Å–∫–∞—è –ø—Ä–æ–∑–∞"]
        },
        {
            "title": "–ë—Ä–∞—Ç—å—è –ö–∞—Ä–∞–º–∞–∑–æ–≤—ã",
            "description": "–ü–æ—Å–ª–µ–¥–Ω–∏–π —Ä–æ–º–∞–Ω –î–æ—Å—Ç–æ–µ–≤—Å–∫–æ–≥–æ, –∏—Å—Ç–æ—Ä–∏—è —Å–µ–º—å–∏ –ö–∞—Ä–∞–º–∞–∑–æ–≤—ã—Ö, –∑–∞—Ç—Ä–∞–≥–∏–≤–∞—é—â–∞—è –≥–ª—É–±–æ–∫–∏–µ –≤–æ–ø—Ä–æ—Å—ã –≤–µ—Ä—ã, —Å–≤–æ–±–æ–¥—ã –≤–æ–ª–∏ –∏ –º–æ—Ä–∞–ª–∏.",
            "authors": ["–§—ë–¥–æ—Ä –î–æ—Å—Ç–æ–µ–≤—Å–∫–∏–π"],
            "genres": ["–†–æ–º–∞–Ω", "–§–∏–ª–æ—Å–æ—Ñ—Å–∫–∞—è –ø—Ä–æ–∑–∞", "–î—Ä–∞–º–∞"]
        },
        {
            "title": "–ò–¥–∏–æ—Ç",
            "description": "–†–æ–º–∞–Ω –æ –∫–Ω—è–∑–µ –ú—ã—à–∫–∏–Ω–µ ‚Äî —á–µ–ª–æ–≤–µ–∫–µ —Å —á–∏—Å—Ç–æ–π –¥—É—à–æ–π, –∫–æ—Ç–æ—Ä—ã–π —Å—Ç–∞–ª–∫–∏–≤–∞–µ—Ç—Å—è —Å –∂–µ—Å—Ç–æ–∫–æ—Å—Ç—å—é –∏ –∫–æ—Ä—ã—Å—Ç—å—é –ø–µ—Ç–µ—Ä–±—É—Ä–≥—Å–∫–æ–≥–æ –æ–±—â–µ—Å—Ç–≤–∞.",
            "authors": ["–§—ë–¥–æ—Ä –î–æ—Å—Ç–æ–µ–≤—Å–∫–∏–π"],
            "genres": ["–†–æ–º–∞–Ω", "–§–∏–ª–æ—Å–æ—Ñ—Å–∫–∞—è –ø—Ä–æ–∑–∞"]
        },
        {
            "title": "–í–∏—à–Ω—ë–≤—ã–π —Å–∞–¥",
            "description": "–ü—å–µ—Å–∞ –ê–Ω—Ç–æ–Ω–∞ –ß–µ—Ö–æ–≤–∞ –æ —Ä–∞–∑–æ—Ä–µ–Ω–∏–∏ –¥–≤–æ—Ä—è–Ω—Å–∫–æ–≥–æ –≥–Ω–µ–∑–¥–∞ –∏ –ø—Ä–æ–¥–∞–∂–µ —Ä–æ–¥–æ–≤–æ–≥–æ –∏–º–µ–Ω–∏—è —Å –≤–∏—à–Ω—ë–≤—ã–º —Å–∞–¥–æ–º.",
            "authors": ["–ê–Ω—Ç–æ–Ω –ß–µ—Ö–æ–≤"],
            "genres": ["–î—Ä–∞–º–∞"]
        },
        {
            "title": "–ß–∞–π–∫–∞",
            "description": "–ü—å–µ—Å–∞ –ß–µ—Ö–æ–≤–∞ –æ –ª—é–±–≤–∏, –∏—Å–∫—É—Å—Å—Ç–≤–µ –∏ –Ω–µ—Å–±—ã–≤—à–∏—Ö—Å—è –º–µ—á—Ç–∞—Ö, —Ä–∞–∑–≤–æ—Ä–∞—á–∏–≤–∞—é—â–∞—è—Å—è –≤ —É—Å–∞–¥—å–±–µ –Ω–∞ –±–µ—Ä–µ–≥—É –æ–∑–µ—Ä–∞.",
            "authors": ["–ê–Ω—Ç–æ–Ω –ß–µ—Ö–æ–≤"],
            "genres": ["–î—Ä–∞–º–∞"]
        },
        {
            "title": "–ü–∞–ª–∞—Ç–∞ ‚Ññ 6",
            "description": "–ü–æ–≤–µ—Å—Ç—å –æ –≤—Ä–∞—á–µ –ø—Å–∏—Ö–∏–∞—Ç—Ä–∏—á–µ—Å–∫–æ–π –±–æ–ª—å–Ω–∏—Ü—ã, –∫–æ—Ç–æ—Ä—ã–π –Ω–∞—á–∏–Ω–∞–µ—Ç —Å–æ–º–Ω–µ–≤–∞—Ç—å—Å—è –≤ –≥—Ä–∞–Ω–∏—Ü–∞—Ö –º–µ–∂–¥—É –Ω–æ—Ä–º–æ–π –∏ –±–µ–∑—É–º–∏–µ–º.",
            "authors": ["–ê–Ω—Ç–æ–Ω –ß–µ—Ö–æ–≤"],
            "genres": ["–ü–æ–≤–µ—Å—Ç—å", "–§–∏–ª–æ—Å–æ—Ñ—Å–∫–∞—è –ø—Ä–æ–∑–∞"]
        },
        {
            "title": "–ï–≤–≥–µ–Ω–∏–π –û–Ω–µ–≥–∏–Ω",
            "description": "–†–æ–º–∞–Ω –≤ —Å—Ç–∏—Ö–∞—Ö –ê–ª–µ–∫—Å–∞–Ω–¥—Ä–∞ –ü—É—à–∫–∏–Ω–∞ ‚Äî —ç–Ω—Ü–∏–∫–ª–æ–ø–µ–¥–∏—è —Ä—É—Å—Å–∫–æ–π –∂–∏–∑–Ω–∏ –Ω–∞—á–∞–ª–∞ XIX –≤–µ–∫–∞ –∏ –∏—Å—Ç–æ—Ä–∏—è –Ω–µ—Å—á–∞—Å—Ç–Ω–æ–π –ª—é–±–≤–∏.",
            "authors": ["–ê–ª–µ–∫—Å–∞–Ω–¥—Ä –ü—É—à–∫–∏–Ω"],
            "genres": ["–†–æ–º–∞–Ω", "–ü–æ—ç–∑–∏—è"]
        },
        {
            "title": "–ö–∞–ø–∏—Ç–∞–Ω—Å–∫–∞—è –¥–æ—á–∫–∞",
            "description": "–ò—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏–π —Ä–æ–º–∞–Ω –ü—É—à–∫–∏–Ω–∞ –æ —Å–æ–±—ã—Ç–∏—è—Ö –ü—É–≥–∞—á—ë–≤—Å–∫–æ–≥–æ –≤–æ—Å—Å—Ç–∞–Ω–∏—è, –ª—é–±–≤–∏ –∏ —á–µ—Å—Ç–∏.",
            "authors": ["–ê–ª–µ–∫—Å–∞–Ω–¥—Ä –ü—É—à–∫–∏–Ω"],
            "genres": ["–†–æ–º–∞–Ω", "–ò—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–∑–∞"]
        },
        {
            "title": "–ü–∏–∫–æ–≤–∞—è –¥–∞–º–∞",
            "description": "–ü–æ–≤–µ—Å—Ç—å –æ –º–æ–ª–æ–¥–æ–º –æ—Ñ–∏—Ü–µ—Ä–µ –ì–µ—Ä–º–∞–Ω–Ω–µ, –æ–¥–µ—Ä–∂–∏–º–æ–º –∂–µ–ª–∞–Ω–∏–µ–º —É–∑–Ω–∞—Ç—å —Ç–∞–π–Ω—É —Ç—Ä—ë—Ö –∫–∞—Ä—Ç.",
            "authors": ["–ê–ª–µ–∫—Å–∞–Ω–¥—Ä –ü—É—à–∫–∏–Ω"],
            "genres": ["–ü–æ–≤–µ—Å—Ç—å"]
        },
        {
            "title": "–ú–∞—Å—Ç–µ—Ä –∏ –ú–∞—Ä–≥–∞—Ä–∏—Ç–∞",
            "description": "–†–æ–º–∞–Ω –ú–∏—Ö–∞–∏–ª–∞ –ë—É–ª–≥–∞–∫–æ–≤–∞ –æ –≤–∏–∑–∏—Ç–µ –¥—å—è–≤–æ–ª–∞ –≤ –ú–æ—Å–∫–≤—É 1930-—Ö –≥–æ–¥–æ–≤, –ø–µ—Ä–µ–ø–ª–µ—Ç—ë–Ω–Ω—ã–π —Å –∏—Å—Ç–æ—Ä–∏–µ–π –ü–æ–Ω—Ç–∏—è –ü–∏–ª–∞—Ç–∞.",
            "authors": ["–ú–∏—Ö–∞–∏–ª –ë—É–ª–≥–∞–∫–æ–≤"],
            "genres": ["–†–æ–º–∞–Ω", "–°–∞—Ç–∏—Ä–∞", "–§–∏–ª–æ—Å–æ—Ñ—Å–∫–∞—è –ø—Ä–æ–∑–∞"]
        },
        {
            "title": "–°–æ–±–∞—á—å–µ —Å–µ—Ä–¥—Ü–µ",
            "description": "–ü–æ–≤–µ—Å—Ç—å-—Å–∞—Ç–∏—Ä–∞ –æ –ø—Ä–æ—Ñ–µ—Å—Å–æ—Ä–µ –ü—Ä–µ–æ–±—Ä–∞–∂–µ–Ω—Å–∫–æ–º, –ø—Ä–µ–≤—Ä–∞—Ç–∏–≤—à–µ–º –±—Ä–æ–¥—è—á–µ–≥–æ –ø—Å–∞ –≤ —á–µ–ª–æ–≤–µ–∫–∞.",
            "authors": ["–ú–∏—Ö–∞–∏–ª –ë—É–ª–≥–∞–∫–æ–≤"],
            "genres": ["–ü–æ–≤–µ—Å—Ç—å", "–°–∞—Ç–∏—Ä–∞"]
        },
        {
            "title": "–ë–µ–ª–∞—è –≥–≤–∞—Ä–¥–∏—è",
            "description": "–†–æ–º–∞–Ω –æ —Å–µ–º—å–µ –¢—É—Ä–±–∏–Ω—ã—Ö –≤ –ö–∏–µ–≤–µ –≤–æ –≤—Ä–µ–º—è –ì—Ä–∞–∂–¥–∞–Ω—Å–∫–æ–π –≤–æ–π–Ω—ã 1918-1919 –≥–æ–¥–æ–≤.",
            "authors": ["–ú–∏—Ö–∞–∏–ª –ë—É–ª–≥–∞–∫–æ–≤"],
            "genres": ["–†–æ–º–∞–Ω", "–ò—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–∑–∞"]
        },
        {
            "title": "–ú—ë—Ä—Ç–≤—ã–µ –¥—É—à–∏",
            "description": "–ü–æ—ç–º–∞ –ù–∏–∫–æ–ª–∞—è –ì–æ–≥–æ–ª—è –æ –ø–æ—Ö–æ–∂–¥–µ–Ω–∏—è—Ö –ß–∏—á–∏–∫–æ–≤–∞, —Å–∫—É–ø–∞—é—â–µ–≥–æ ¬´–º—ë—Ä—Ç–≤—ã–µ –¥—É—à–∏¬ª –∫—Ä–µ–ø–æ—Å—Ç–Ω—ã—Ö –∫—Ä–µ—Å—Ç—å—è–Ω.",
            "authors": ["–ù–∏–∫–æ–ª–∞–π –ì–æ–≥–æ–ª—å"],
            "genres": ["–†–æ–º–∞–Ω", "–°–∞—Ç–∏—Ä–∞"]
        },
        {
            "title": "–†–µ–≤–∏–∑–æ—Ä",
            "description": "–ö–æ–º–µ–¥–∏—è –æ —á–∏–Ω–æ–≤–Ω–∏–∫–∞—Ö —É–µ–∑–¥–Ω–æ–≥–æ –≥–æ—Ä–æ–¥–∞, –ø—Ä–∏–Ω—è–≤—à–∏—Ö –ø—Ä–æ–µ–∑–∂–µ–≥–æ –∑–∞ —Ä–µ–≤–∏–∑–æ—Ä–∞ –∏–∑ –ü–µ—Ç–µ—Ä–±—É—Ä–≥–∞.",
            "authors": ["–ù–∏–∫–æ–ª–∞–π –ì–æ–≥–æ–ª—å"],
            "genres": ["–î—Ä–∞–º–∞", "–°–∞—Ç–∏—Ä–∞"]
        },
        {
            "title": "–®–∏–Ω–µ–ª—å",
            "description": "–ü–æ–≤–µ—Å—Ç—å –æ –º–∞–ª–µ–Ω—å–∫–æ–º —á–µ–ª–æ–≤–µ–∫–µ ‚Äî —Ç–∏—Ç—É–ª—è—Ä–Ω–æ–º —Å–æ–≤–µ—Ç–Ω–∏–∫–µ –ê–∫–∞–∫–∏–∏ –ë–∞—à–º–∞—á–∫–∏–Ω–µ –∏ –µ–≥–æ –º–µ—á—Ç–µ –æ –Ω–æ–≤–æ–π —à–∏–Ω–µ–ª–∏.",
            "authors": ["–ù–∏–∫–æ–ª–∞–π –ì–æ–≥–æ–ª—å"],
            "genres": ["–ü–æ–≤–µ—Å—Ç—å"]
        },
        {
            "title": "–û—Ç—Ü—ã –∏ –¥–µ—Ç–∏",
            "description": "–†–æ–º–∞–Ω –ò–≤–∞–Ω–∞ –¢—É—Ä–≥–µ–Ω–µ–≤–∞ –æ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–µ –ø–æ–∫–æ–ª–µ–Ω–∏–π –∏ –Ω–∏–≥–∏–ª–∏–∑–º–µ –Ω–∞ –ø—Ä–∏–º–µ—Ä–µ –ï–≤–≥–µ–Ω–∏—è –ë–∞–∑–∞—Ä–æ–≤–∞.",
            "authors": ["–ò–≤–∞–Ω –¢—É—Ä–≥–µ–Ω–µ–≤"],
            "genres": ["–†–æ–º–∞–Ω", "–§–∏–ª–æ—Å–æ—Ñ—Å–∫–∞—è –ø—Ä–æ–∑–∞"]
        },
        {
            "title": "–ó–∞–ø–∏—Å–∫–∏ –æ—Ö–æ—Ç–Ω–∏–∫–∞",
            "description": "–¶–∏–∫–ª —Ä–∞—Å—Å–∫–∞–∑–æ–≤ –¢—É—Ä–≥–µ–Ω–µ–≤–∞ –æ —Ä—É—Å—Å–∫–æ–π –¥–µ—Ä–µ–≤–Ω–µ –∏ –∫—Ä–µ—Å—Ç—å—è–Ω–∞—Ö, –Ω–∞–ø–∏—Å–∞–Ω–Ω—ã–π —Å –≥–ª—É–±–æ–∫–∏–º —Å–æ—á—É–≤—Å—Ç–≤–∏–µ–º –∫ –Ω–∞—Ä–æ–¥—É.",
            "authors": ["–ò–≤–∞–Ω –¢—É—Ä–≥–µ–Ω–µ–≤"],
            "genres": ["–†–∞—Å—Å–∫–∞–∑"]
        },
        {
            "title": "–î–æ–∫—Ç–æ—Ä –ñ–∏–≤–∞–≥–æ",
            "description": "–†–æ–º–∞–Ω –ë–æ—Ä–∏—Å–∞ –ü–∞—Å—Ç–µ—Ä–Ω–∞–∫–∞ –æ —Å—É–¥—å–±–µ —Ä—É—Å—Å–∫–æ–≥–æ –∏–Ω—Ç–µ–ª–ª–∏–≥–µ–Ω—Ç–∞ –≤ —ç–ø–æ—Ö—É —Ä–µ–≤–æ–ª—é—Ü–∏–∏ –∏ –ì—Ä–∞–∂–¥–∞–Ω—Å–∫–æ–π –≤–æ–π–Ω—ã.",
            "authors": ["–ë–æ—Ä–∏—Å –ü–∞—Å—Ç–µ—Ä–Ω–∞–∫"],
            "genres": ["–†–æ–º–∞–Ω", "–ò—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–∑–∞", "–ü–æ—ç–∑–∏—è"]
        },
        {
            "title": "–ì–µ—Ä–æ–π –Ω–∞—à–µ–≥–æ –≤—Ä–µ–º–µ–Ω–∏",
            "description": "–†–æ–º–∞–Ω –ú–∏—Ö–∞–∏–ª–∞ –õ–µ—Ä–º–æ–Ω—Ç–æ–≤–∞ –æ –ü–µ—á–æ—Ä–∏–Ω–µ ‚Äî ¬´–ª–∏—à–Ω–µ–º —á–µ–ª–æ–≤–µ–∫–µ¬ª, —Å–∫—É—á–∞—é—â–µ–º –∏ —Ä–∞–∑–æ—á–∞—Ä–æ–≤–∞–Ω–Ω–æ–º –≤ –∂–∏–∑–Ω–∏.",
            "authors": ["–ú–∏—Ö–∞–∏–ª –õ–µ—Ä–º–æ–Ω—Ç–æ–≤"],
            "genres": ["–†–æ–º–∞–Ω", "–§–∏–ª–æ—Å–æ—Ñ—Å–∫–∞—è –ø—Ä–æ–∑–∞"]
        },
        {
            "title": "–ê—Ä—Ö–∏–ø–µ–ª–∞–≥ –ì–£–õ–ê–ì",
            "description": "–î–æ–∫—É–º–µ–Ω—Ç–∞–ª—å–Ω–æ-—Ö—É–¥–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω–æ–µ –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ –ê–ª–µ–∫—Å–∞–Ω–¥—Ä–∞ –°–æ–ª–∂–µ–Ω–∏—Ü—ã–Ω–∞ –æ —Å–∏—Å—Ç–µ–º–µ —Å–æ–≤–µ—Ç—Å–∫–∏—Ö –ª–∞–≥–µ—Ä–µ–π.",
            "authors": ["–ê–ª–µ–∫—Å–∞–Ω–¥—Ä –°–æ–ª–∂–µ–Ω–∏—Ü—ã–Ω"],
            "genres": ["–ò—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–∑–∞"]
        },
        {
            "title": "–û–¥–∏–Ω –¥–µ–Ω—å –ò–≤–∞–Ω–∞ –î–µ–Ω–∏—Å–æ–≤–∏—á–∞",
            "description": "–ü–æ–≤–µ—Å—Ç—å –æ –æ–¥–Ω–æ–º –¥–Ω–µ –∑–∞–∫–ª—é—á—ë–Ω–Ω–æ–≥–æ —Å–æ–≤–µ—Ç—Å–∫–æ–≥–æ –ª–∞–≥–µ—Ä—è, –ø–æ–ª–æ–∂–∏–≤—à–∞—è –Ω–∞—á–∞–ª–æ –ª–∞–≥–µ—Ä–Ω–æ–π –ø—Ä–æ–∑–µ.",
            "authors": ["–ê–ª–µ–∫—Å–∞–Ω–¥—Ä –°–æ–ª–∂–µ–Ω–∏—Ü—ã–Ω"],
            "genres": ["–ü–æ–≤–µ—Å—Ç—å", "–ò—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–∑–∞"]
        },
        {
            "title": "–ù–∞ –¥–Ω–µ",
            "description": "–ü—å–µ—Å–∞ –ú–∞–∫—Å–∏–º–∞ –ì–æ—Ä—å–∫–æ–≥–æ –æ –∂–∏—Ç–µ–ª—è—Ö –Ω–æ—á–ª–µ–∂–∫–∏ –¥–ª—è –±–µ–∑–¥–æ–º–Ω—ã—Ö ‚Äî –ª—é–¥—è—Ö, –æ–∫–∞–∑–∞–≤—à–∏—Ö—Å—è –Ω–∞ –¥–Ω–µ –∂–∏–∑–Ω–∏.",
            "authors": ["–ú–∞–∫—Å–∏–º –ì–æ—Ä—å–∫–∏–π"],
            "genres": ["–î—Ä–∞–º–∞", "–§–∏–ª–æ—Å–æ—Ñ—Å–∫–∞—è –ø—Ä–æ–∑–∞"]
        },
        {
            "title": "–¢—ë–º–Ω—ã–µ –∞–ª–ª–µ–∏",
            "description": "–°–±–æ—Ä–Ω–∏–∫ —Ä–∞—Å—Å–∫–∞–∑–æ–≤ –ò–≤–∞–Ω–∞ –ë—É–Ω–∏–Ω–∞ –æ –ª—é–±–≤–∏ ‚Äî —Ç—Ä–∞–≥–∏—á–µ—Å–∫–æ–π, –º–∏–º–æ–ª—ë—Ç–Ω–æ–π –∏ –ø—Ä–µ–∫—Ä–∞—Å–Ω–æ–π.",
            "authors": ["–ò–≤–∞–Ω –ë—É–Ω–∏–Ω"],
            "genres": ["–†–∞—Å—Å–∫–∞–∑"]
        }
    ]

    books = {}
    for book in books_data:
        book_id = api.create_book(book["title"], book["description"])
        if book_id:
            books[book["title"]] = {
                "id": book_id,
                "authors": book["authors"],
                "genres": book["genres"]
            }

    print("\nüîó –°–æ–∑–¥–∞–Ω–∏–µ —Å–≤—è–∑–µ–π...")

    for book_title, book_info in books.items():
        book_id = book_info["id"]

        for author_name in book_info["authors"]:
            if author_name in authors:
                api.link_author_book(authors[author_name], book_id)
                
        for genre_name in book_info["genres"]:
            if genre_name in genres:
                api.link_genre_book(genres[genre_name], book_id)

    print("\n" + "=" * 50)
    print("üìä –ò–¢–û–ì–ò:")
    print(f"  ‚Ä¢ –ê–≤—Ç–æ—Ä–æ–≤ —Å–æ–∑–¥–∞–Ω–æ: {len(authors)}")
    print(f"  ‚Ä¢ –ñ–∞–Ω—Ä–æ–≤ —Å–æ–∑–¥–∞–Ω–æ: {len(genres)}")
    print(f"  ‚Ä¢ –ö–Ω–∏–≥ —Å–æ–∑–¥–∞–Ω–æ: {len(books)}")
    print("=" * 50)


if __name__ == "__main__":
    main()
